<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Stream (docs.local.flux.Flux.Stream)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">Index</a> &#x00BB; <a href="../../../../index.html">docs</a> &#x00BB; <a href="../../../index.html">local</a> &#x00BB; <a href="../../index.html">flux</a> &#x00BB; <a href="../index.html">Flux</a> &#x00BB; Stream</nav><header class="odoc-preamble"><h1>Module <code><span>Flux.Stream</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#creating-streams.">Creating streams.</a></li><li><a href="#transforming-a-stream.">Transforming a stream.</a></li><li><a href="#combining-streams.">Combining streams.</a></li><li><a href="#consumers.">Consumers.</a></li><li><a href="#adaptors.">Adaptors.</a></li></ul></nav></div><div class="odoc-content"><h3 id="creating-streams."><a href="#creating-streams." class="anchor"></a>Creating streams.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p>Empty stream with no elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-range"><a href="#val-range" class="anchor"></a><code><span><span class="keyword">val</span> range : <span><span class="optlabel">?by</span>:int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p><code>range ~by:step n m</code> is a sequence of integers starting from <code>n</code> to <code>m</code> (excluding <code>m</code>) incremented by <code>step</code>. The range is pen on the right side.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-repeat"><a href="#val-repeat" class="anchor"></a><code><span><span class="keyword">val</span> repeat : <span><span class="optlabel">?times</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p><code>repeat ~times:n x</code> produces a stream by repeating <code>x</code> <code>n</code> times. If <code>n</code> is omitted, <code>x</code> is repeated <em>ad infinitum</em>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unfold"><a href="#val-unfold" class="anchor"></a><code><span><span class="keyword">val</span> unfold : <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'s</span>)</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p><code>unfold seed next</code> is a stream created from a <code>seed</code> state and a function that produces elements and an updated state. The stream will terminate when <code>next</code> produces <code>None</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span><span class="keyword">val</span> concat : <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p><code>concat s0 s1</code> is a stream that exhausts all elements from <code>s0</code> and then all elements from <code>s1</code>.</p></div></div><h3 id="transforming-a-stream."><a href="#transforming-a-stream." class="anchor"></a>Transforming a stream.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p>A stream with all elements transformed with a mapping function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tap"><a href="#val-tap" class="anchor"></a><code><span><span class="keyword">val</span> tap : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p>Pass each element through an effectful function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-take"><a href="#val-take" class="anchor"></a><code><span><span class="keyword">val</span> take : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p>Take first <code>n</code> elements from the stream and discard the rest.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span><span class="keyword">val</span> filter : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p>A stream that includes only the elements that satisfy a predicate.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span><span class="keyword">val</span> filter_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p><code>filter_map fn src</code> applies <code>fn</code> to every element <code>x</code> of source, discarding it if <code>fn x</code> produces <code>None</code>, and keeping the transformed value otherwise.</p></div></div><h3 id="combining-streams."><a href="#combining-streams." class="anchor"></a>Combining streams.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-interpose"><a href="#val-interpose" class="anchor"></a><code><span><span class="keyword">val</span> interpose : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p>Inserts a separator element between each stream element.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flat_map"><a href="#val-flat_map" class="anchor"></a><code><span><span class="keyword">val</span> flat_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../index.html#type-stream">stream</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p><code>flat_map fn stream</code> is a stream concatenated from sub-streams produced by applying <code>fn</code> to all elements of <code>stream</code>.</p></div></div><h3 id="consumers."><a href="#consumers." class="anchor"></a>Consumers.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-drain"><a href="#val-drain" class="anchor"></a><code><span><span class="keyword">val</span> drain : <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Consume and discard all elements from the given stream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-each"><a href="#val-each" class="anchor"></a><code><span><span class="keyword">val</span> each : <span><span class="optlabel">?parallel</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>each fn stream</code> applies an function <code>fn</code> to all elements of stream. Each function is performed cooperatively via the Miou scheduler.</p></div></div><h3 id="adaptors."><a href="#adaptors." class="anchor"></a>Adaptors.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-into"><a href="#val-into" class="anchor"></a><code><span><span class="keyword">val</span> into : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>into sink stream</code> is the result value produced by streaming all elements of <code>stream</code> into <code>sink</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-via"><a href="#val-via" class="anchor"></a><code><span><span class="keyword">val</span> via : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../index.html#type-flow">flow</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p><code>via flow stream</code> is stream produced by transforming all elements of <code>stream</code> via <code>flow</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-from"><a href="#val-from" class="anchor"></a><code><span><span class="keyword">val</span> from : <span><span><span class="type-var">'a</span> <a href="../index.html#type-source">source</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../index.html#type-stream">stream</a></span></span></code></div><div class="spec-doc"><p><code>from source</code> is a stream created from a source.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : 
  <span><span class="label">from</span>:<span><span class="type-var">'a</span> <a href="../index.html#type-source">source</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">via</span>:<span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../index.html#type-flow">flow</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">into</span>:<span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'c</span> * <span><span><span class="type-var">'a</span> <a href="../index.html#type-source">source</a></span> option</span></span></code></div><div class="spec-doc"><p>Fuses sources, sinks and flows and produces a result and a leftover.</p><pre class="language-ocaml"><code>  let r, leftover = Stream.run ~from:source ~via:flow ~into:sink</code></pre><p>Streams elements from <code>source</code> into <code>sink</code> via a stream transformer <code>flow</code>. In addition to the result value <code>r</code> produced by <code>sink</code>, a <code>leftover</code> source is returned, if <code>source</code> was not exhausted.</p><p><b>NOTE</b>: If a leftover source is produced, it is required to either consume it or manually <a href="../Source/index.html#val-dispose" title="Source.dispose">dispose</a> its resources. Not doing so might lead to resource leaks.</p></div></div><p>I/O Streams.</p><div class="odoc-spec"><div class="spec value anchored" id="val-file"><a href="#val-file" class="anchor"></a><code><span><span class="keyword">val</span> file : <span><span class="label">filename</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="../index.html#type-stream">stream</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>file filename stream</code> writes bytes from <code>stream</code> into the file located at <code>filename</code>.</p></div></div></div></body></html>
