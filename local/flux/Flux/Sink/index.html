<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sink (docs.local.flux.Flux.Sink)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">Index</a> &#x00BB; <a href="../../../../index.html">docs</a> &#x00BB; <a href="../../../index.html">local</a> &#x00BB; <a href="../../index.html">flux</a> &#x00BB; <a href="../index.html">Flux</a> &#x00BB; Sink</nav><header class="odoc-preamble"><h1>Module <code><span>Flux.Sink</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#basic-sinks.">Basic sinks.</a></li><li><a href="#data-sinks.">Data sinks.</a></li><li><a href="#combining-sinks.">Combining sinks.</a></li><li><a href="#i/o-sinks.">I/O sinks.</a></li></ul></nav></div><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span><span class="keyword">val</span> fold : <span><span>(<span><span class="type-var">'r</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'r</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'r</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>fold fn init</code> is a sink that reduces all input elements with the stepping function <code>fn</code> starting with the accumulator value <code>init</code>.</p></div></div><h3 id="basic-sinks."><a href="#basic-sinks." class="anchor"></a>Basic sinks.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-full"><a href="#val-full" class="anchor"></a><code><span><span class="keyword">val</span> full : <span><span>(<span class="type-var">'a</span>, unit)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p>A full sink taht will not consume any input and will not produce any results.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_full"><a href="#val-is_full" class="anchor"></a><code><span><span class="keyword">val</span> is_full : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_full sink</code> is <code>true</code> if <code>sink</code> is full. Full sinks do not consume any elements but will be initialized to determine if they are full.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span><span class="keyword">val</span> is_empty : <span><span>(<span class="type-var">'a</span>, bool)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>is_empty</code> is a sink that produces <code>true</code> when it is stopped without consuming any elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-length"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><span>(<span class="type-var">'a</span>, int)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p>Consumes and counts all input elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-drain"><a href="#val-drain" class="anchor"></a><code><span><span class="keyword">val</span> drain : <span><span>(<span class="type-var">'a</span>, unit)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p>Consumes all elements producing nothing. Useful for triggering actions in effectful streams.</p></div></div><h3 id="data-sinks."><a href="#data-sinks." class="anchor"></a>Data sinks.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span><span>(string, string)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p>Consumes and concatenates bytes.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> list</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p>Puts all input elements into a list.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-seq"><a href="#val-seq" class="anchor"></a><code><span><span class="keyword">val</span> seq : <span><span><span class="type-var">'a</span> <a href="../../../../stdlib/Stdlib/Seq/index.html#type-t">Seq.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> <a href="../../../../stdlib/Stdlib/Seq/index.html#type-t">Seq.t</a></span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>seq s</code> puts all input elements into the given <code>s</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> array</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p>Puts all input elements into an array.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-buffer"><a href="#val-buffer" class="anchor"></a><code><span><span class="keyword">val</span> buffer : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'a</span> array</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p>Similar to <a href="#val-array"><code>array</code></a> but will only consume <code>n</code> elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fill"><a href="#val-fill" class="anchor"></a><code><span><span class="keyword">val</span> fill : <span><span class="type-var">'r</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'r</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>fill x</code> uses <code>x</code> to fill the sink. This sink will not consume any input and will immediately produce <code>x</code> when used.</p></div></div><h3 id="combining-sinks."><a href="#combining-sinks." class="anchor"></a>Combining sinks.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-zip"><a href="#val-zip" class="anchor"></a><code><span><span class="keyword">val</span> zip : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r0</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r1</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'r0</span> * <span class="type-var">'r1</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>zip l r</code> computes both <code>l</code> and <code>r</code> cooperatively with the same input being sent to both sinks. The results of both sinks are produced.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-both"><a href="#val-both" class="anchor"></a><code><span><span class="keyword">val</span> both : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r0</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r1</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'r0</span> * <span class="type-var">'r1</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>both l r</code> computes both <code>l</code> and <code>r</code> <b>in parallel</b> with the same input being sent to both sinks. The results of both sinks are produced.</p><p><b>NOTE</b>: Please note that this function does not comply with Miou's rules if you attempt to use it in the form of a <i>let-binding</i> <code>and+</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unzip"><a href="#val-unzip" class="anchor"></a><code><span><span class="keyword">val</span> unzip : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r0</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'r1</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'r0</span> * <span class="type-var">'r1</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>unzip l r</code> is a sink that receives pairs <code>'a * 'b</code>, sending the first element into <code>l</code> and the second into <code>r</code>. Both sinks are computed cooperatively and their results returned as an output pair.</p><p>The sink becomes full when either <code>l</code> or <code>r</code> get full.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-race"><a href="#type-race" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) race</span></span><span> = </span></code><ol><li id="type-race.Left" class="def variant constructor anchored"><a href="#type-race.Left" class="anchor"></a><code><span>| </span><span><span class="constructor">Left</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></li><li id="type-race.Right" class="def variant constructor anchored"><a href="#type-race.Right" class="anchor"></a><code><span>| </span><span><span class="constructor">Right</span> <span class="keyword">of</span> <span class="type-var">'b</span></span></code></li><li id="type-race.Both" class="def variant constructor anchored"><a href="#type-race.Both" class="anchor"></a><code><span>| </span><span><span class="constructor">Both</span> <span class="keyword">of</span> <span class="type-var">'a</span> * <span class="type-var">'b</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-race"><a href="#val-race" class="anchor"></a><code><span><span class="keyword">val</span> race : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r0</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r1</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span><span>(<span class="type-var">'r0</span>, <span class="type-var">'r1</span>)</span> <a href="#type-race">race</a></span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-each"><a href="#val-each" class="anchor"></a><code><span><span class="keyword">val</span> each : 
  <span><span class="optlabel">?parallel</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">merge</span>:<span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'c</span>, <span class="type-var">'a</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>each ?parallel ~init ~merge fn</code> applies <code>fn</code> to all input elements and <code>merge</code> producing results with <code>init</code>. If <code>parallel</code> is <code>true</code> (default is <code>false</code>), <code>fn</code> is executed in parallel to the domain in which the <i>sink</i> is executed. Otherwise, the actions are executed cooperatively. If one of these actions terminates abnormally, the execution of the returned <i>sink</i> raises an exception.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-premap"><a href="#val-premap" class="anchor"></a><code><span><span class="keyword">val</span> premap : <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r</span>)</span> <a href="../index.html#type-sink">sink</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'r</span>)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>premap fn sink</code> is a sink that <em>premaps</em> the input value.</p></div></div><h3 id="i/o-sinks."><a href="#i/o-sinks." class="anchor"></a>I/O sinks.</h3><div class="odoc-spec"><div class="spec value anchored" id="val-file"><a href="#val-file" class="anchor"></a><code><span><span class="keyword">val</span> file : <span><span class="label">filename</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span>(string, unit)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>file ~filename</code> saves string elements into the given file <code>filename</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-out_channel"><a href="#val-out_channel" class="anchor"></a><code><span><span class="keyword">val</span> out_channel : <span><span class="optlabel">?close</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../stdlib/Stdlib/index.html#type-out_channel">out_channel</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(string, unit)</span> <a href="../index.html#type-sink">sink</a></span></span></code></div><div class="spec-doc"><p><code>out_channel ?close oc</code> saves string elements into the given out channel <code>oc</code>. If <code>oc</code> is not <a href="../../../../stdlib/Stdlib/index.html#val-stdout"><code>stdout</code></a> and <code>?close</code> is <code>true</code> (by default), <code>out_channel</code> will close it at the end.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Syntax"><a href="#module-Syntax" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Syntax/index.html">Syntax</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Infix"><a href="#module-Infix" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Infix/index.html">Infix</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
