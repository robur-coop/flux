<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Hook (docs.findlib-1.miou.Miou.Hook)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">Index</a> &#x00BB; <a href="../../../../index.html">docs</a> &#x00BB; <a href="../../../index.html">findlib-1</a> &#x00BB; <a href="../../index.html">miou</a> &#x00BB; <a href="../index.html">Miou</a> &#x00BB; Hook</nav><header class="odoc-preamble"><h1>Module <code><span>Miou.Hook</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Type of hooks.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>add fn</code> adds a new hook (a function) which will be executed at every <i>tick</i> of the current domain. This means that each time an effect is suspended, the function will be executed. Here's an example:</p><pre class="language-ocaml"><code>  # Miou.run @@ fun () -&gt;
    let _hook = Miou.Hook.add @@ fun () -&gt; print_endline &quot;Hello&quot; in
    Miou.yield ();
    Miou.yield () ;;
  Hello
  Hello
  - : unit = ()</code></pre><p>A hook is local to the current domain and runs on the domain in which it was created. A hook <b>cannot</b> interact with the scheduler and, what's more, cannot use the effects associated with Miou. Miou's effects manager is not attached to it. If the given function raises an argument, the hook is <b>deleted</b>. The user can remove the actual hook with <a href="#val-remove"><code>remove</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>remove h</code> removes the hook <code>h</code>. If <code>h</code> does not belong to the current domain, it raises an exception <code>Invalid_argument</code>.</p></div></div></div></body></html>
