<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Computation (docs.findlib-1.miou.sync.Miou_sync.Computation)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../../index.html">Index</a> &#x00BB; <a href="../../../../../index.html">docs</a> &#x00BB; <a href="../../../../index.html">findlib-1</a> &#x00BB; <a href="../../../index.html">miou</a> &#x00BB; <a href="../../index.html">sync</a> &#x00BB; <a href="../index.html">Miou_sync</a> &#x00BB; Computation</nav><header class="odoc-preamble"><h1>Module <code><span>Miou_sync.Computation</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-state"><a href="#type-state" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a state</span></span><span> = </span></code><ol><li id="type-state.Cancelled" class="def variant constructor anchored"><a href="#type-state.Cancelled" class="anchor"></a><code><span>| </span><span><span class="constructor">Cancelled</span> <span class="keyword">of</span> exn * <a href="../../../../../stdlib/Stdlib/Printexc/index.html#type-raw_backtrace">Printexc.raw_backtrace</a></span></code></li><li id="type-state.Returned" class="def variant constructor anchored"><a href="#type-state.Returned" class="anchor"></a><code><span>| </span><span><span class="constructor">Returned</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></li><li id="type-state.Continue" class="def variant constructor anchored"><a href="#type-state.Continue" class="anchor"></a><code><span>| </span><span><span class="constructor">Continue</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-state.balance" class="def record field anchored"><a href="#type-state.balance" class="anchor"></a><code><span>balance : int;</span></code></li><li id="type-state.triggers" class="def record field anchored"><a href="#type-state.triggers" class="anchor"></a><code><span>triggers : <span><a href="../Trigger/index.html#type-t">Trigger.t</a> list</span>;</span></code></li></ol><code><span>}</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>!'a t</span></span><span> = <span class="keyword">private</span> <span><span><span class="type-var">'a</span> <a href="#type-state">state</a></span> <a href="../../../../../stdlib/Stdlib/Atomic/index.html#type-t">Atomic.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>create ()</code> creates a new computation in the running state.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_return"><a href="#val-try_return" class="anchor"></a><code><span><span class="keyword">val</span> try_return : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_return c value</code> attempts to complete the computation with the specified <code>value</code> and returns <code>true</code> on success. Otherwise returns <code>false</code>, which means that the computation had already been completed before.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_capture"><a href="#val-try_capture" class="anchor"></a><code><span><span class="keyword">val</span> try_capture : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_capture c fn x</code> calls <code>fn x</code> and tries to complete the computation with the value returned or the exception raised by the call and returns <code>true</code> on success. Otherwise returns <code>false</code>, which means that the computation had already been completed before.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_cancel"><a href="#val-try_cancel" class="anchor"></a><code><span><span class="keyword">val</span> try_cancel : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(exn * <a href="../../../../../stdlib/Stdlib/Printexc/index.html#type-raw_backtrace">Printexc.raw_backtrace</a>)</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_cancel c (exn, bt)</code> attempts to mark the computation <code>c</code> as cancelled with the specified exception and backtrace and returns <code>true</code> on success. Otherwise returns <code>false</code>, which means that the computation had already been completed before.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_running"><a href="#val-is_running" class="anchor"></a><code><span><span class="keyword">val</span> is_running : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_running c</code> determines whether the computation <code>c</code> is in the running state meaning that it has not yet been completed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cancelled"><a href="#val-cancelled" class="anchor"></a><code><span><span class="keyword">val</span> cancelled : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(exn * <a href="../../../../../stdlib/Stdlib/Printexc/index.html#type-raw_backtrace">Printexc.raw_backtrace</a>)</span> option</span></span></code></div><div class="spec-doc"><p><code>cancelled c</code> returns the exception that the computation has been cancelled with or returns <code>None</code> in case the computation has not been cancelled.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-raise_if_errored"><a href="#val-raise_if_errored" class="anchor"></a><code><span><span class="keyword">val</span> raise_if_errored : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>raise_if_errored</code> raises the exception the computation was cancelled with if it was errored.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-peek"><a href="#val-peek" class="anchor"></a><code><span><span class="keyword">val</span> peek : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, exn * <a href="../../../../../stdlib/Stdlib/Printexc/index.html#type-raw_backtrace">Printexc.raw_backtrace</a>)</span> <a href="../../../../../stdlib/Stdlib/index.html#type-result">result</a></span> option</span></span></code></div><div class="spec-doc"><p><code>peek c</code> returns the result of the computation <code>c</code> or <code>None</code> in case the computation has not completed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_attach"><a href="#val-try_attach" class="anchor"></a><code><span><span class="keyword">val</span> try_attach : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Trigger/index.html#type-t">Trigger.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_attach c trigger</code> tries to attach the trigger to be signaled on completion of the computation and returns <code>true</code> on success. Otherwise, it returns <code>false</code>, which means that the computation has already been completed or the trigger has already been signaled.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-detach"><a href="#val-detach" class="anchor"></a><code><span><span class="keyword">val</span> detach : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Trigger/index.html#type-t">Trigger.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>detach c trigger</code> <a href="../Trigger/index.html#val-signal" title="Trigger.signal">signals</a> the trigger and detaches it from the computation <code>c</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-clean"><a href="#val-clean" class="anchor"></a><code><span><span class="keyword">val</span> clean : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-await"><a href="#val-await" class="anchor"></a><code><span><span class="keyword">val</span> await : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, exn * <a href="../../../../../stdlib/Stdlib/Printexc/index.html#type-raw_backtrace">Printexc.raw_backtrace</a>)</span> <a href="../../../../../stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>await c</code> waits for the computation to complete and either returns the value of the completed computation or the exception the computation was cancelled with.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-await_exn"><a href="#val-await_exn" class="anchor"></a><code><span><span class="keyword">val</span> await_exn : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canceller"><a href="#val-canceller" class="anchor"></a><code><span><span class="keyword">val</span> canceller : <span><span class="label">from</span>:<span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">into</span>:<span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../Trigger/index.html#type-t">Trigger.t</a></span></code></div></div></div></body></html>
